DATA_SEG SEGMENT
	NUMBERS DB 16 DUP(?)
	SYMBOLS DB 16 DUP(?)
	N DB 0H;表示总的符号数有三个
	I DB 0H
	X DB 0H
	Y DB 0H
	NE DB 0H
	LAST DB 0H
DATA_SEG ENDS 

STACK_SEG SEGMENT STACK
	DB 10 DUP(?)
STACK_SEG ENDS

CODE_SEG SEGMENT
	ASSUME DS:DATA_SEG,SS:STACK_SEG,CS:CODE_SEG
START:MOV AX,DATA_SEG
	MOV DS,AX
	MOV CL,0H
STA1: MOV AH,01H
	INT 21H
	CMP AL,'+'
	JZ SYM
	CMP AL,'-'
	JZ SYM
	CMP AL,'*'
	JZ SYM
	CMP AL,'/'
	JZ SYM
	CMP AL,'='
	JZ STA2
	SUB AL,30H
	LEA BX,NUMBERS
	ADD BL,CL
	MOV [BX],AL
	JMP STA1
SYM: LEA BX,SYMBOLS
	ADD BL,CL
	MOV [BX],AL
	INC CL
	JMP STA1
STA2:	MOV DL,0H
	MOV N,CL
	LEA BX,SYMBOLS
	MOV CH,0H;加减号
NEXT:	CMP DL,N
	JZ T
	JMP NEX
T:	JMP STA3
NEX:	MOV AL,DS:[BX]
	CMP AL,'+'
	JZ LAB1
	CMP AL,'-'
	JZ LAB2
	CMP AL,'*'
	JZ CHENG
	CMP AL,'/'
	JZ CHU
CHENG:TEST CH,1H
	JNZ CHENG1
	MOV AL,'+'
	JMP CHENG2
CHENG1:MOV AL,'-'
CHENG2:MOV [BX],AL
	MOV AX,0H
	PUSH BX
	LEA BX,NUMBERS
	ADD BL,DL	
	MOV CL,[BX]
	MOV X,CL
	MOV CL,0H
	MOV [BX],CL
	INC BX
	MOV AL,[BX]
	MUL X
	MOV [BX],AL
	POP BX
	JMP LAB3
CHU: TEST CH,1H
	JNZ CHU1
	MOV AL,'+'
	JMP CHU2
CHU1:MOV AL,'-'
CHU2:MOV [BX],AL
	PUSH BX
	LEA BX,NUMBERS
	ADD BL,DL	
	MOV CL,[BX]
	MOV X,CL
	MOV CL,0H
	MOV [BX],CL
	INC BX
	MOV AX,0H
	MOV AL,[BX]
	MOV CL,AL
	MOV AL,X
	DIV CL
	MOV [BX],AL
	POP BX
	JMP LAB3

LAB1:	MOV CH,0H
	JMP LAB3
LAB2: MOV CH,1H
LAB3:	MOV DL,I
	INC DL
	MOV I,DL
	INC BX
	JMP NEXT
STA3: LEA BX, NUMBERS
	MOV AL,[BX]
	MOV X,AL
	MOV CX,0H
	MOV CL,N
	MOV DL,0H
LOO:	LEA BX,SYMBOLS
	ADD BL,DL
	INC DL
	MOV AL,[BX]
	LEA BX,NUMBERS
	ADD BL,DL
	CMP AL,'+'
	JNZ JIAN
	MOV AL,[BX]
	ADD AL,X
	MOV X,AL
	LOOP LOO
	JMP NEXT2	
JIAN: MOV AL,[BX]
	ADD AL,Y
	MOV Y,AL
	LOOP LOO
NEXT2: MOV AL,X
	MOV BL,Y
	CMP AL,BL
	JB NEGF 
	SUB AL,BL
	MOV BL,0H
	JMP OUTPUT
NEGF: MOV CL,1H
	MOV NE,CL
	SUB BL,AL
	MOV AL,BL
	MOV BL,1H
OUTPUT:ADD AX,0H

CODE_SEG ENDS
END START